<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="utf-8" />
		<title>注册</title>
		<link rel="stylesheet" href="layui/css/layui.css" th:href="@{static/layui/css/layui.css}" media="all" />
		<script src="layui/layui.js" th:src="@{static/layui/layui.js}"></script>
		<script src="layui/layui.all.js" th:src="@{static/layui/layui.all.js}"></script>
		<script type="text/javascript" src="js/jquery-1.8.3.min.js" th:src="@{static/js/jquery-1.8.3.min.js}"></script>
		<script type="text/javascript" src="js/jquery-1.8.3.js" th:src="@{static/js/jquery-1.8.3.js}"></script>
		<link rel="stylesheet" href="css/login.css" th:href="@{static/css/login.css}" media="all" //>

	</head>

	<body>

		<!--     小人登录                -->
		<div class="music-lgin">
			<div class="music-lgin-all">
				<!--左手-->
				<div class="music-lgin-left ovhd">
					<div class="music-hand">
						<div class="music-lgin-hara"></div>
						<div class="music-lgin-hars"></div>
					</div>
				</div>

				<!--脑袋-->
				<div class="music-lgin-dh">
					<div class="music-lgin-alls">
						<div class="music-lgin-eyeleft">
							<div class="music-left-eyeball yeball-l"></div>
						</div>
						<div class="music-lgin-eyeright">
							<div class="music-right-eyeball yeball-r"></div>
						</div>
						<div class="music-lgin-cl"></div>
					</div>
					<!--鼻子-->
					<div class="music-nose"></div>
					<!--嘴-->
					<div class="music-mouth music-mouth-ds"></div>
					<!--肩-->
					<div class="music-shoulder-l">
						<div class="music-shoulder"></div>
					</div>
					<div class="music-shoulder-r">
						<div class="music-shoulder"></div>
					</div>
					<!--消息框-->
					<div class="music-news">芥末测评欢迎您！</div>
				</div>

				<!--右手-->
				<div class="music-lgin-right ovhd">
					<div class="music-hand">
						<div class="music-lgin-hara"></div>
						<div class="music-lgin-hars"></div>
					</div>
				</div>

			</div>
			<!--1-->
			<div class="music-lgin-text">
				<div class="p1">用户注册</div>
			</div>

			<!--2-->
			<div class="music-lgin-text">
				<input class="inputname inputs" type="text" name="nickname" id="nickname" placeholder="用户名/昵称" required="required" />
			</div>
			<!--3-->
			<div class="music-lgin-text">
				<input class="inputname inputs" type="text" name="username" id="username" placeholder="登录名为邮箱/手机号" required="required" />
			</div>
			<!--5-->
			<div class="music-lgin-text">
				<input type="password" class="mima inputs" name="password" id="password" placeholder="密码" required="required" />
			</div>
			<!--6-->
			<div class="music-lgin-text">
				<input class="music-qd inputs1" type="submit" value="注册" id="zhuce" />
			</div>

			<!--7-->
			<div class="arguement">
				<br />
				<input type="radio" name="Usertype" value="0" id="Usertype" checked="checked" />学生&nbsp;&nbsp;
				<input type="radio" name="Usertype" value="1" id="Usertype" />老师
				<br />
				<br />
				<input type="checkbox" id="xieyi"> 阅读并同意
				<a href="#" class="p4">《芥末用户注册协议》和</a>
				<a href="#" class="p4">《隐私政策》</a><br /> 已有账号？
				<a href="tologin" class="p3">点击登录</a>

				<div class="line"></div>
				<div class="p2">第三方账号快速登录</div>

				<a href="https://wx.qq.com/" class="layui-icon layui-icon-login-wechat" style="font-size: 35px; color: #00FF00;"> </a>
				<a href="https://id.qq.com/login/ptlogin.html" class="layui-icon layui-icon-login-qq" style="font-size: 35px; color: #1E9FFF;"></a>
				<a href="https://weibo.com/" class="layui-icon layui-icon-login-weibo" style="font-size: 35px; color: #FF9800;"></a>
			</div>

		</div>

		<script type="text/javascript">
			//眼睛 密码部分
			$(".mima").focus(function() {
				$(".music-lgin-left").addClass("left-dh").removeClass("rmleft-dh");
				$(".music-lgin-right").addClass("right-dh").removeClass("right-rmdh");
				$(".music-hand").addClass("no");
			}).blur(function() {
				$(".music-lgin-left").removeClass("left-dh").addClass("rmleft-dh");
				$(".music-lgin-right").removeClass("right-dh").addClass("right-rmdh");
				$(".music-hand").removeClass("no");

			})

			//注册正则 简单判断
			$('.music-qd').click(function() {
				if(($('.inputname').val() == '')) {
					$(".music-news").html("请输入6-14位的用户名哦！")
				} else if(($('#username').val() == '')) {
					$(".music-news").html("亲，你的邮箱/手机号还没有输入呦！")
				} else if(($('#password').val() == '')) {
					$(".music-news").html("请输入6-12位字母数字组合的密码！")
					//$(".music-news").addClass("block")
				}
			});

			$(function() {

				$("#zhuce").click(function() {
					/*用户名判断*/
					//					var pattern = /[a-z|0-9|A-Z|_\!\@\#\$\%\^\&\*\(\)\-\+\=\|\.\`\、\x]{6,14}$/; /*6-14为用户名*/
					//					var str = $("#nickname").val();
					//					var s = pattern.test(str);
					//					console.log(pattern.test(str));
					//					if(s == true) {
					//						/*登录名判断*/
					//						return;
					//
					//					} else {
					//						layer.msg('请输入6-14位的用户名！');
					//						$("#nickname").attr("value", "");
					//					}

				})

				$("#zhuce").click(function() {
					/*用户名判断*/
//					var pattern = /[a-z|0-9|A-Z|_\!\@\#\$\%\^\&\*\(\)\-\+\=\|\.\`\、\x]{6,14}$/; /*6-14为用户名*/
//					var pattern1 = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/; /*邮箱*/
//					var pattern2 = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/; /*手机*/
//					var str = $("#username").val();
//					var s1 = pattern.test(str);
//					var s2 = pattern1.test(str);
//					var s3 = pattern2.test(str);
//					console.log(pattern1.test(str));
//					console.log(pattern2.test(str));
//					console.log(pattern.test(str));
//					if(s1 == true || s2 == true || s3 == true) {
//						/*登录名判断*/
//						return;
//					} else {
//						layer.msg('请输入正确的登录名（6-14位）或邮箱或手机号（11位）！');
//						$("#username").attr("value", "");
//					}
				});

				$("#zhuce").click(function() {
//					var pattern3 = /^[a-zA-Z]\w{5,17}$/; /*密码6-18位*/
//					var str = $("#password").val();
//					var s5 = pattern.test(str);
//					console.log(pattern.test(str));
//					if(s5 == true) {
//						return;
//					} else {
//						layer.msg('请输入6-18位包含数字、字母、下划线！');
//						$("#password").attr("value", "");
//					}

					var pattern = /[a-z|0-9|A-Z|_\!\@\#\$\%\^\&\*\(\)\-\+\=\|\.\`\、\x]{6,14}$/; /*6-14为用户名*/
					var str = $("#nickname").val();
					var s = pattern.test(str);
					console.log(pattern.test(str));
					if(s == true) {
						/*登录名判断*/
						return;

					} else {
						alert('请输入6-14位的用户名!');
						layer.msg('!');
						$("#nickname").attr("value", "");
					}
					
					var pattern = /[a-z|0-9|A-Z|_\!\@\#\$\%\^\&\*\(\)\-\+\=\|\.\`\、\x]{6,14}$/; /*6-14为用户名*/
					var pattern1 = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/; /*邮箱*/
					var pattern2 = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/; /*手机*/
					var str = $("#username").val();
					var s1 = pattern.test(str);
					var s2 = pattern1.test(str);
					var s3 = pattern2.test(str);
					console.log(pattern1.test(str));
					console.log(pattern2.test(str));
					console.log(pattern.test(str));
					if(s1 == true || s2 == true || s3 == true) {
						/*登录名判断*/
						return;
					} else {
						alert('请输入正确的登录名(6-14位)或邮箱或手机号(11位)!');
						layer.msg('!');
						$("#username").attr("value", "");
					}
					
					var pattern3 = /^[a-zA-Z]\w{5,17}$/; /*密码6-18位*/
					var str = $("#password").val();
					var s5 = pattern.test(str);
					console.log(pattern.test(str));
					if(s5 == true) {
						return;
					} else {
						alert('请输入6-18位密码包含数字、字母、下划线!');
						layer.msg('!');
						$("#password").attr("value", "");
					}

				});

				//				$("#zhuce").click(function() {
				//								var $parent = $(this).parent();
				//								var password2 = document.getElementsByName("password")[0].value;
				//								//var password1 = document.getElementsByName("password1")[0].value;
				//								var nickValue = document.getElementsByName("nickname")[0].value;
				//								var nameValue = document.getElementsByName("username")[0].value;
				//								if(nickValue.length >= 6 && password.length >= 6 ) {
				//									if(nameValue.indexOf("@") || nameValue.length >= 6  ){
				//									$parent.find(".high").remove();
				//									alert("输入符合要求")	
				//									}else{
				//										alert("登录名有误");
				//										return ;
				//									}
				//	
				//								} else {
				//									$parent.find(".high").remove();
				//									alert("用户输入有误");
				//									return ;
				//								}
				//							})

			});

			$("#zhuce").click(function() {

				if(($('#username').val() == '') || ($('#username').val() == '') || ($('#password').val() == '')) {
					alert('用户名、登录名、密码均不能为空');
				} else {

					
					
					var p1 = $('#nickname').val();
					var p2 = $('#username').val();
					var p3 = $('#password').val();
					var p4 = $('input[name=Usertype]:checked').val();

					var u = {
						'nickname': p1,
						/*nickname要和entity表中的属性相对应*/
						'username': p2,
						'password': p3,
						'usertype': p4
					}; //包装成一个对象
					$.ajax({
						url: 'register',
						type: 'post',
						contentType: 'application/json;charset=utf-8',
						data: JSON.stringify(u), //转换成json格式的字符串，传到后台
						dataType: "text", //返回类型
						success: function(e) {
							alert(e);
						},
						error: function() {
							alert('提交失败');
						}
					});
				}

			});

			$(document).keydown(function(event) {
				if(event.keyCode == "13") {
					alert("确认要提交么？");

				}
			});
		</script>

	</body>

</html>